{% extends 'base.html.twig' %}

{% block title %}Posts{% endblock %}

{% block body %}
<h1>Posts</h1>
<table class="nk-table">
    <tbody>
        <tr>
            <th>Id</th>
            <td>{{ post.id }}</td>
        </tr>
        <tr>
            <th>Resolved</th>
            <td>{{ post.resolved ? 'Yes' : 'No' }}</td>
        </tr>
        <tr>
            <th>Title</th>
            <td>{{ post.title }}</td>
        </tr>
        <tr>
            <th>Content</th>
            <td>{{ post.content }}</td>
        </tr>
        <tr>
            <th>Tags</th>
            <td>{{ post.tags }}</td>
        </tr>
        <tr>
            <th>PostDate</th>
            <td>{{ post.postDate ? post.postDate|date('Y-m-d H:i:s') : '' }}</td>
        </tr>
        <tr>
            <th>Rating</th>
            {% if stars == 0 %}
            <td>
                {% for i in range(1,5) %}
                ☆
                {% endfor %}
            </td>
            {% else %}
            <td>
                {% for i in range(1, stars) %}
                ⭐
                {% endfor %}
                {% if 5-stars > 0 %}
                {% for i in range(0, 4-stars) %}
                ☆
                {% endfor %}
                {% endif %}
            </td>
            {% endif %}
        </tr>
        <tr>
            <th>Action</th>
            <td><a href="{{ path('app_user_post_likes_dislikes_new', {'user_id': user_id, 'like': 1, 'post_id': post.id}) }}"
                    class="nk-btn nk-btn-outline nk-btn-color-success">Like</a> | <a
                    href="{{ path('app_user_post_likes_dislikes_new', {'user_id': user_id, 'like': 0, 'post_id': post.id}) }}"
                    class="nk-btn nk-btn-rounded nk-btn-outline nk-btn-color-warning">Dislike</a>
            </td>
        </tr>
    </tbody>
</table>


<div class="nk-gap-1"></div>
<a href="{{ path('app_posts_index') }}" class="nk-btn nk-btn-rounded nk-btn-color-white">back to list</a>

<div class="nk-gap-1"></div>

{% if user_id == post.poster.id %}
<a href="{{ path('app_posts_edit', {'id': post.id}) }}" class="nk-btn nk-btn-rounded nk-btn-color-white">edit</a>
<div class="nk-gap-1"></div>

{{ include('posts/_delete_form.html.twig') }}
{% endif %}
<hr />
<h3 style="display:inline-block;margin-right:88px;">Comments</h3>
<a style="display:inline-block;" href="{{ path('app_posts_comments_new', {'id': post.id}) }}"
    class="nk-btn nk-btn-rounded nk-btn-color-main-1">Comment</a>
<table class="nk-table">
    <thead>
        <tr>
            <th>Id</th>
            <th>Comments</th>
            <th>Date</th>
            <th>actions</th>
        </tr>
    </thead>
    <tbody>
        {% for comment in comments %}
        <tr>
            <td>{{ comment.id }}</td>
            <td>{{ comment.commentBody }}</td>
            <td>{{ comment.commentDate ? comment.commentDate|date('Y-m-d H:i:s') : '' }}</td>
            <td>
                <a href="{{ path('app_posts_comments_show', {'pid': post.id, 'cid': comment.id}) }}"
                    class="nk-btn nk-btn-rounded nk-btn-color-main-1">show</a>
                {% if comment.commenter.id == user_id %}
                <a href="{{ path('app_posts_comments_edit', {'pid': post.id, 'cid': comment.id}) }}"
                    class="nk-btn nk-btn-color-primary">edit</a>
                {% endif %}
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4">no records found</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}